# ドロップテーブルの表示内容について

この機能では設定欄からCoreKeeperのインストール先の有効なフォルダパスを指定している場合にのみご利用頂けます。
ゲームのドロップテーブルを読みだしているため、本ソフト自身はドロップテーブルのデータを持っておらず、また大型アップデート後には新規追加されたボスや敵のドロップテーブルを見ることが可能です。

## データの取得元について
コアキーパーは主にmod開発者向けに、ドロップテーブルを誰でも参照可能なjsonファイルの形式でゲーム内に含んでいます。
生データは以下のフォルダ内にあります。
> (インストール先Steamライブラリ)\steamapps\common\Core Keeper\CoreKeeper_Data\StreamingAssets\Conf\Loot\

本ソフトではここから取得したデータを、人の目に分かりやすく整形する機能だけを持ちます。

## ドロップ定義の用語説明
全てのドロップテーブルの全てのアイテムには大きく分けて以下のデータを持ちます。
|用語|説明|
|---|---|
|**通常抽選枠**|アイテム1枠分通常の抽選です。抽選枠数が複数ある場合はその回数分だけ抽選が実行されます。主にボス以外の敵を倒した場合や釣りではこの枠を1つだけ持ちます。一部のボスやアイテムでは最大最小値があり、通常抽選枠数は変動することがあります。|
|**保証抽選枠**|通常抽選枠よりも少ないアイテムがより高い確率で抽選される枠です。複数の通常抽選枠がある場合に、先頭の1枠が保証抽選枠に変化します。抽選確率は通常抽選枠とは別物として設定されます。主にボスドロップや宝箱ドロップなどにおいて、複数の通常抽選枠がある場合に保証抽選枠も設定されていることが多いです。|
|**確定枠**|「グラーチの目」などのストーリー必須アイテムや各種ヒドラ出す目と宝石、ウルシュライムの巨大ミトコンドリアなどは抽選テーブルと関係なく排出されます。これは100%出るため、テーブルには記載されません。|
|**ワールド難易度**|Hardモードでは通常抽選枠数を50%増加させます。|
|**セッション人数**|人数が1人増えるごとに通常抽選枠数を50%増加させます。また上記のHard由来の増分とは乗算になるため、例えばHardで2人でボスを倒した場合の通常抽選枠数は1.5^2=2.25倍となり、小数点以下は四捨五入されて整数となります。|
|**n%を超える回数:m**|正確にはボス周回や宝箱について「m回挑戦して、少なくとも1つが入手できるが確率n%」についての言い換えとなります。|

## 釣りについて
釣りではまず、「魚」か「魚以外」がヒットしたかを判定します。
通常この確率は4:6です。
以下のスキルによりこの確率は変動します。
- **釣りで貴重または魚以外のアイテムが針にかかる確率**
  - 翻訳が分かり辛いですが、「魚以外を釣る確率補正です。」
  - 例えば10%上がると3:7に偏ります。
- **魚が針にかかる確率**
  - 例えば10%上がると5:5に偏ります。
- **高レアな魚がかかる確率**
  - 「高レアな魚」とはインベントリ枠が緑色以上の魚です。マグマの魚テーブルなどでは全て緑以上のため、無意味なスキルとなり、スターライトノーチラスの確率を上げることは出来ません。

魚がになった場合は魚テーブルから、アイテムになった場合はアイテムテーブルから釣れるものが抽選されます。

## ドロップテーブルの記載内容について
- ウェイトとは、重み付けの値です。生データ内では確率は確率の形では定義されず、(当該アイテムのウェイト)/(テーブル内のウェイト合計)で通常抽選枠確率が算出されます。
- 通常抽選枠数が難易度や人数で変化するのは現状、ボスドロップのみです。
- 入手が100%確定しているアイテムについての記載はテーブルにありません。また確定入手アイテムについては通常/保証問わず全ての抽選が完了した後に追加されます。例えばグラーチの目、ヒドラの目+宝石、ジャンボミトコンドリアなどが該当します。
- 「xxの箱」、「大きなxx箱」とは、どのバイオームにも存在する固有木箱のことです。サイズが1×1のものは「xxの箱」、サイズが1×2,2×1,2×2のものは「大きなxx箱」の扱いとなります。
- 元データはPugStormが提供しているものですが、**必ず最新のバージョンのドロップ率と一致しているとは限りません。** 例えば1.1.2.5において提供されているデータは、1.0.0.1で修正されたId間違いの8331が森の採掘スポットより低確率で出るデータになっていますが、実際は8331は出ません。PugStormがドロップ率を変更した時に任意でjsonを出力しているだけでゲーム内では参照されていません。
- 厳密に参照させて追加するには起動オプションでの設定が必要になります。詳しくはConfフォルダ内の公式readme.txtを参照ください。
- テーブルは存在するものの、使われていないと思われるテーブルのファイルが僅かに存在します。
- このゲームに限らない話ですが、確率とは「計算上100回で出るらしい、今90回やったからあと10回以内に出るはずだ！」とはなりません。コインを投げて100回裏だったとしても次に投げて表の確率は50%から上がったりしませんよね。  
確率とは過去の履歴に一切関係なく、未来への可能性として不変のものです。